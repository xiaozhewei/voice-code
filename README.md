# VoiceCode

VoiceCode æ˜¯ä¸€ä¸ªæ— ç¼è·¨è®¾å¤‡çš„å…±äº«ç»ˆç«¯å·¥å…·ï¼Œä¸“ä¸º AI å‘½ä»¤è¡Œäº¤äº’ï¼ˆå¦‚ Gemini CLI å’Œ Claude Codeï¼‰ä¼˜åŒ–ã€‚å®ƒå…è®¸ä½ é€šè¿‡æ‰‹æœºæµè§ˆå™¨ä½¿ç”¨è¯­éŸ³è¾“å…¥æŒ‡ä»¤ï¼ŒåŒæ—¶åœ¨æ¡Œé¢æµè§ˆå™¨ä¸Šä½¿ç”¨é”®ç›˜æ“ä½œï¼Œæ‰€æœ‰çŠ¶æ€åœ¨å¤šç«¯å®æ—¶åŒæ­¥ã€‚

## æ ¸å¿ƒç‰¹æ€§

- **ğŸ“± æ··åˆè¾“å…¥æ¨¡å¼**ï¼šç»“åˆæ‰‹æœºç«¯çš„ç§»åŠ¨ä¾¿æ·æ€§ï¼ˆè¯­éŸ³è¾“å…¥ï¼‰ä¸æ¡Œé¢ç«¯çš„ç²¾å‡†æ€§ï¼ˆé”®ç›˜è¾“å…¥ï¼‰ã€‚
- **ğŸ”’ æœ¬åœ°éšç§ä¿æŠ¤**ï¼šé›†æˆ [SenseVoiceSmall-browser](https://github.com/guoguo111/SenseVoiceSmall-browser) æ¨¡å‹ï¼Œåœ¨æµè§ˆå™¨æœ¬åœ°è¿›è¡Œä¸­è‹±æ–‡è¯­éŸ³è¯†åˆ«ï¼Œæ— éœ€ä¸Šä¼ äº‘ç«¯ã€‚
- **âš¡ å®æ—¶åŒæ­¥**ï¼šåŸºäº WebSocket å®ç°å¤šç«¯ç»ˆç«¯ä¼šè¯å…±äº«ï¼Œä½ åœ¨æ‰‹æœºè¯´çš„è¯ï¼Œæ¡Œé¢ç«¯ç«‹å³æ‰§è¡Œã€‚
- **ğŸš€ å¿«é€Ÿæ“ä½œ (Quick Actions)**ï¼šæ‰‹æœºç«¯æä¾›æ™ºèƒ½å‘½ä»¤æŠ½å±‰ï¼Œè‡ªåŠ¨è®°å½•å¸¸ç”¨æŒ‡ä»¤ï¼Œä¸€é”®å‘é€ã€‚

## å¿«é€Ÿå¼€å§‹

### 1. å®‰è£…ä¾èµ–

ç¡®ä¿ä½ å·²ç»å®‰è£…äº† Node.js ç¯å¢ƒã€‚

```bash
npm install
```

### 2. å¯åŠ¨æœåŠ¡

**é»˜è®¤å¯åŠ¨ï¼ˆä»…æœ¬åœ°ç½‘ç»œï¼‰ï¼š**

```bash
npm start
```
æœåŠ¡é»˜è®¤è¿è¡Œåœ¨ `https://localhost:3000`ã€‚
*æ³¨æ„ï¼šç”±äºä½¿ç”¨è‡ªç­¾åè¯ä¹¦ï¼Œæµè§ˆå™¨å¯èƒ½ä¼šæç¤ºä¸å®‰å…¨ï¼Œè¯·é€‰æ‹©â€œç»§ç»­è®¿é—®â€æˆ–â€œä¿¡ä»»æ­¤ç½‘ç«™â€ã€‚*

### 3. è¿æ¥è®¾å¤‡

å¯åŠ¨åï¼Œæ§åˆ¶å°ä¼šæ˜¾ç¤ºä¸€ä¸ª **äºŒç»´ç **ã€‚
1. **æ¡Œé¢ç«¯**ï¼šåœ¨æµè§ˆå™¨æ‰“å¼€ `https://localhost:3000`ã€‚
2. **ç§»åŠ¨ç«¯**ï¼šç¡®ä¿æ‰‹æœºå’Œç”µè„‘åœ¨åŒä¸€å±€åŸŸç½‘ï¼Œæ‰«æäºŒç»´ç æ‰“å¼€é¡µé¢ã€‚
   - *iOS/Android æ³¨æ„*ï¼šç”±äºæµè§ˆå™¨å®‰å…¨é™åˆ¶ï¼Œè¯­éŸ³è¯†åˆ«åŠŸèƒ½å¿…é¡»åœ¨ HTTPS ç¯å¢ƒä¸‹è¿è¡Œã€‚

---

## é«˜çº§ç”¨æ³•

### ğŸŒ å†…ç½‘ç©¿é€ (å…¬ç½‘è®¿é—®)

å¦‚æœä½ å¸Œæœ›åœ¨éå±€åŸŸç½‘ç¯å¢ƒä¸‹è¿æ¥ï¼Œæˆ–è€…è§£å†³å±€åŸŸç½‘ HTTPS è¯ä¹¦é—®é¢˜ï¼Œå¯ä»¥ä½¿ç”¨å†…ç½®çš„ ngrok éš§é“åŠŸèƒ½ã€‚

**å‰ç½®æ¡ä»¶**ï¼š
ä½ éœ€è¦ä¸€ä¸ª ngrok çš„ Authtokenã€‚è¯·è®¿é—® [ngrok dashboard](https://dashboard.ngrok.com/get-started/your-authtoken) è·å–ã€‚

**è®¾ç½® Token å¹¶å¯åŠ¨ï¼š**

Windows (CMD):
```cmd
set NGROK_AUTHTOKEN=ä½ çš„token
npm run start:tunnel
```

Mac/Linux:
```bash
export NGROK_AUTHTOKEN=ä½ çš„token
npm run start:tunnel
```

å¯åŠ¨åï¼Œæ§åˆ¶å°ä¼šç”Ÿæˆä¸€ä¸ªå…¬ç½‘ HTTPS é“¾æ¥å’Œå¯¹åº”çš„äºŒç»´ç ï¼Œæ‰‹æœºç›´æ¥æ‰«æå³å¯å®‰å…¨è®¿é—®ã€‚

### ğŸ¤– è‡ªåŠ¨å¯åŠ¨ AI CLI

ä½ å¯ä»¥è®© VoiceCode åœ¨å¯åŠ¨æ—¶ç›´æ¥è¿è¡Œç‰¹å®šçš„ AI åŠ©æ‰‹ï¼Œæ–¹ä¾¿ç›´æ¥å¼€å§‹å¯¹è¯ã€‚

**å¯åŠ¨ Gemini CLI:**
```bash
npm run start:gemini
# æˆ–
node server.js --gemini
```

**å¯åŠ¨ Claude Code:**
```bash
npm run start:claude
# æˆ–
node server.js --claude
```

## æ‰‹æœºç«¯æ“ä½œæŒ‡å—

1. **æˆæƒéº¦å…‹é£**ï¼šé¦–æ¬¡æ‰“å¼€éœ€å…è®¸æµè§ˆå™¨è®¿é—®éº¦å…‹é£æƒé™ã€‚
2. **æŒ‰ä½è¯´è¯ (PTT)**ï¼šé•¿æŒ‰å±å¹•ä¸‹æ–¹çš„éº¦å…‹é£æŒ‰é’®è¯´è¯ï¼Œæ¾å¼€åè‡ªåŠ¨å‘é€æŒ‡ä»¤åˆ°ç»ˆç«¯ã€‚
3. **å¿«é€ŸæŒ‡ä»¤**ï¼šä¸Šæ»‘åº•éƒ¨çš„â€œå¿«é€Ÿæ“ä½œâ€æŠ½å±‰ï¼Œç‚¹å‡»å¸¸ç”¨å‘½ä»¤ç›´æ¥å‘é€ã€‚

## å¸¸è§é—®é¢˜

**Q: æ‰‹æœºæµè§ˆå™¨æç¤ºè¿æ¥ä¸å®‰å…¨ï¼Ÿ**
A: è¿™æ˜¯å› ä¸ºæœ¬åœ°æœåŠ¡ä½¿ç”¨çš„æ˜¯è‡ªç­¾å SSL è¯ä¹¦ã€‚å»ºè®®ä½¿ç”¨ `npm run start:tunnel` æ¨¡å¼ï¼Œé€šè¿‡ ngrok æä¾›çš„åˆè§„ HTTPS é“¾æ¥è®¿é—®ï¼Œä½“éªŒæœ€å¥½ã€‚

**Q: è¯­éŸ³è¯†åˆ«é€Ÿåº¦æ…¢ï¼Ÿ**
A: è¯­éŸ³è¯†åˆ«æ¨¡å‹å®Œå…¨åœ¨æ‰‹æœºæµè§ˆå™¨æœ¬åœ°è¿è¡Œã€‚é¦–æ¬¡åŠ è½½æ¨¡å‹å¯èƒ½éœ€è¦å‡ ç§’é’Ÿï¼Œä¹‹åçš„è¯†åˆ«é€Ÿåº¦å–å†³äºæ‰‹æœºå¤„ç†å™¨çš„æ€§èƒ½ã€‚

**Q: å¦‚ä½•åœ¨ Windows ä¸Šä¿®å¤ node-pty æƒé™é—®é¢˜ï¼Ÿ**
A: å¦‚æœé‡åˆ°ç»ˆç«¯å¯åŠ¨é”™è¯¯ï¼Œå°è¯•è¿è¡Œä¿®å¤è„šæœ¬ï¼š
```bash
node scripts/fix-node-pty-perms.js
```

## è®¸å¯è¯

ISC

## å®‰è£…ä¸å‘å¸ƒï¼ˆnpmï¼‰

### ä» npm å®‰è£…ï¼ˆç”¨æˆ·ï¼‰

ä½œä¸ºé¡¹ç›®ä¾èµ–ï¼š

```bash
npm install voicecode
```

å…¨å±€å®‰è£…ï¼ˆæä¾› `voicecode` å‘½ä»¤ï¼‰ï¼š

```bash
npm install -g voicecode
# ç„¶åè¿è¡Œï¼š
voicecode
```

ä½¿ç”¨ npxï¼ˆæ— éœ€å…¨å±€å®‰è£…ï¼‰ï¼š

```bash
npx voicecode
```

### å‘å¸ƒåˆ° npmï¼ˆç»´æŠ¤è€…ï¼‰

æœ¬åœ°äº¤äº’å¼å‘å¸ƒï¼š

```bash
npm login
npm publish --access public
```

ä½¿ç”¨ CI/Automation Tokenï¼ˆæ¨èè‡ªåŠ¨åŒ–å‘å¸ƒï¼‰ï¼š

1. åœ¨ https://www.npmjs.com/ -> Access Tokens åˆ›å»ºä¸€ä¸ª **Automation** tokenï¼Œå¹¶å‹¾é€‰ **Bypass two-factor authentication**ï¼ˆå¦‚æœä½ çš„è´¦å·å¯ç”¨äº† 2FAï¼‰ã€‚
2. åœ¨ CI ç¯å¢ƒä¸­è®¾ç½®ç¯å¢ƒå˜é‡ `NPM_TOKEN`ï¼ˆä¸è¦æŠŠ token æ˜æ–‡å†™å…¥ä»“åº“ï¼‰ã€‚
3. åœ¨ä»“åº“æ ¹ç›®å½•åˆ›å»ºæˆ–ä½¿ç”¨ä¸´æ—¶ `.npmrc`ï¼š

```text
//registry.npmjs.org/:_authToken=${NPM_TOKEN}
```

4. åœ¨ CI ä¸­æ‰§è¡Œï¼š

```bash
npm ci
npm publish --access public
```

æç¤ºï¼šå‘å¸ƒå‰è¯·ç¡®ä¿ `package.json` çš„ `version` å·²æ­£ç¡®æ›´æ–°ï¼ˆå¦‚ä½¿ç”¨ `npm version patch`ï¼‰ï¼Œå¹¶åœ¨å‘å¸ƒåä¸ºè¯¥ç‰ˆæœ¬æ‰“ tag å¹¶æ¨é€ï¼š

```bash
npm version patch -m "chore(release): %s"
git push origin --follow-tags
```

å®‰å…¨æç¤ºï¼šç”Ÿæˆçš„ `Automation` token èƒ½ç›´æ¥å‘å¸ƒåŒ…ï¼Œè¯·å¦¥å–„ä¿ç®¡å¹¶ä»…åœ¨å—ä¿¡ä»»çš„ CI ä¸­ä½¿ç”¨ã€‚
